"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2593],{83590:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(85893),i=r(45697),a=r.n(i),l=r(67294),s=r(11163),o=r(21425),d=r(94717);r(26107);var c=r(50261),u=r(87357),m=r(46574);function p(e){let{children:t}=e,{isAuthenticated:r,isInitialized:i}=(0,o.E)(),{pathname:a,push:p}=(0,s.useRouter)(),[x,h]=(0,l.useState)(null);return((0,l.useEffect)(()=>{x&&a!==x&&p(x),r&&h(null)},[r,a,p,x]),i)?r?(0,n.jsxs)(n.Fragment,{children:[" ",t," "]}):(a!==x&&h(a),(0,n.jsx)(d.Z,{})):(0,n.jsx)(u.Z,{mt:10,children:(0,n.jsx)(m.Z,{children:(0,n.jsx)(c.Z,{})})})}p.propTypes={children:a().node}},41483:function(e,t,r){var n=r(85893),i=r(67294),a=r(66242),l=r(77651),s=r(87357),o=r(44267),d=r(51233),c=r(15861),u=r(46574),m=r(86886),p=r(50135),x=r(69417),h=r(46901),v=r(54927),g=r(11163),b=r(63763),f=r(21425),y=r(99042);t.Z=e=>{let{paymentDetails:t,setShowPayment:r}=e,{user:j}=(0,f.E)();(0,g.useRouter)();let[Z,C]=(0,i.useState)(!1),[P,N]=(0,i.useState)({cardNumber:"",expiryDate:"",cvv:"",nameOnCard:"",email:"company@mailinator.com",expMonth:"",expYear:""}),[k,O]=(0,i.useState)({}),[T,D]=(0,i.useState)(!1),_=e=>{O({});let{name:t,value:r}=e.target;if("expiryDate"===t){2===(r=r.replace(/[^0-9/]/g,"")).length&&-1===r.indexOf("/")?r+="/":r.length>2&&(r=r.substring(0,2)+"/"+r.substring(2).replace(/[^\d]/g,"")),3===r.length&&"deleteContentBackward"===e.nativeEvent.inputType&&(r=r.slice(0,-1));let[n,i]=r.split("/");N({...P,[t]:r,expMonth:n,expYear:i||""})}else if("cvv"===t)r=r.replace(/\D/g,"").slice(0,3),N({...P,[t]:r});else if("cardNumber"===t){var n;r=(null===(n=r.replace(/\D/g,"").match(/.{1,4}/g))||void 0===n?void 0:n.join(" "))||"",N({...P,[t]:r.slice(0,19)})}else N({...P,[t]:r})},S=e=>{let t={},r=new Date().getFullYear()%100,n=new Date().getMonth()+1,i=e.cardNumber.replace(/\s/g,"");if(e.cardNumber?16!==i.length&&(t.cardNumber="Card number must be 16 digits!"):t.cardNumber="Card number is required!",e.expiryDate){let[i,a]=e.expiryDate.split("/").map(e=>parseInt(e,10));isNaN(i)||isNaN(a)||i<1||i>12?t.expiryDate="Invalid month!":(a<r||a===r&&i<n)&&(t.expiryDate="Card has expired!")}else t.expiryDate="Expiry date is required!";return e.cvv?3!==e.cvv.length&&(t.cvv="CVV must be 3 digits!"):t.cvv="CVV is required!",e.nameOnCard||(t.nameOnCard="Name on card is required!"),t},w=async e=>{e.preventDefault();let n=S(P);if(O(n),0===Object.keys(n).length){let[e,n]=P.expiryDate.split("/"),i={user_id:null==j?void 0:j.id,invoice_id:null==t?void 0:t.invoice_id,email:null==j?void 0:j.email,number:null==P?void 0:P.cardNumber,exp_month:Number(e),exp_year:Number(n),cvc:Number(null==P?void 0:P.cvv),name:null==P?void 0:P.nameOnCard};try{let e=await b.Z.post("api/auth/payment/customer-invoice-payment",i);(null==e?void 0:e.status)===200&&(C(!0),setTimeout(()=>{r(!1)},1500))}catch(e){if(e.response){let{data:t}=e.response;O(t.errors)}else console.error("An error occurred:",e.message)}}};return T?(0,n.jsx)(y.Z,{setShowOTPVerification:D}):(0,n.jsxs)(a.Z,{sx:{paddingBottom:"120px"},children:[(0,n.jsx)(l.Z,{open:Z,autoHideDuration:6e3,onClose:()=>C(!1),anchorOrigin:{vertical:"top",horizontal:"center"},style:{top:"100px"},children:(0,n.jsx)(h.Z,{elevation:6,variant:"filled",onClose:()=>C(!1),severity:"success",children:"Purchase plan successful!!"})}),(0,n.jsx)(s.Z,{sx:{position:"relative",overflow:"hidden",width:"100%",height:{lg:"350px",md:"350px",sm:"100%",xs:"100%"},backgroundImage:'url("/banner/banner.png")',backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"right center",zIndex:5,display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},children:(0,n.jsx)(o.Z,{className:"dashboard_subscription_box_stack_responsive",sx:{paddingTop:{lg:"6rem!important",md:"6rem!important",sm:"6rem!important",xs:"3rem!important"},paddingBottom:{lg:"4rem!important",md:"4rem!important",sm:"2rem!important",xs:"2rem!important"},position:"relative",zIndex:9},children:(0,n.jsx)(d.Z,{spacing:4,children:(0,n.jsx)(c.Z,{gutterBottom:!0,fontSize:44,component:"h2",fontWeight:600,color:"white",variant:"h2",children:t.name})})})}),(0,n.jsxs)(u.Z,{maxWidth:"md",children:[(0,n.jsx)(c.Z,{variant:"h4",align:"center",gutterBottom:!0,style:{marginBottom:"2rem",color:"#333",paddingTop:"25px"},children:"Pay with card"}),(0,n.jsx)(a.Z,{variant:"outlined",style:{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)",borderRadius:"16px"},children:(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(s.Z,{display:"flex",justifyContent:"center",alignItems:"center",mb:2,children:(0,n.jsx)(v.Z,{fontSize:"large",style:{color:"#ff7533"}})}),(0,n.jsx)("form",{onSubmit:w,children:(0,n.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsx)(p.Z,{label:"Card Number",variant:"outlined",fullWidth:!0,name:"cardNumber",InputProps:{startAdornment:(0,n.jsx)(v.Z,{style:{marginRight:"10px"}}),inputMode:"numeric",pattern:"[0-9]*"},value:null==P?void 0:P.cardNumber,onChange:_,error:!!(null==k?void 0:k.cardNumber),helperText:null==k?void 0:k.cardNumber})}),(0,n.jsx)(m.ZP,{item:!0,xs:6,children:(0,n.jsx)(p.Z,{label:"Expiry Date (MM/YY)",variant:"outlined",fullWidth:!0,name:"expiryDate",value:null==P?void 0:P.expiryDate,onChange:_,error:!!(null==k?void 0:k.expiryDate),helperText:null==k?void 0:k.expiryDate})}),(0,n.jsx)(m.ZP,{item:!0,xs:6,children:(0,n.jsx)(p.Z,{label:"CVV",variant:"outlined",fullWidth:!0,name:"cvv",inputProps:{maxLength:3,inputMode:"numeric",pattern:"[0-9]*"},value:null==P?void 0:P.cvv,onChange:_,error:!!(null==k?void 0:k.cvv),helperText:null==k?void 0:k.cvv})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsx)(p.Z,{label:"Name on Card",variant:"outlined",fullWidth:!0,name:"nameOnCard",value:null==P?void 0:P.nameOnCard,onChange:_,error:!!(null==k?void 0:k.nameOnCard),helperText:(null==k?void 0:k.nameOnCard)||" "})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsx)(x.Z,{type:"submit",variant:"contained",style:{backgroundColor:"#ff7533",color:"white",borderRadius:"8px"},fullWidth:!0,children:"Complete payment"})}),(0,n.jsx)(x.Z,{fullWidth:!0,variant:"text",onClick:()=>r(!1),children:"Back to Plans"})]})})]})})]})]})}},99042:function(e,t,r){var n=r(85893),i=r(67294),a=r(87357),l=r(51233),s=r(44267),o=r(86886),d=r(15861),c=r(50135),u=r(69417),m=r(6154);t.Z=e=>{let{setShowOTPVerification:t}=e,[r,p]=(0,i.useState)(""),[x,h]=(0,i.useState)(""),[v,g]=(0,i.useState)(!1),[b,f]=(0,i.useState)(!1),y=async()=>{if(6!==r.length){h("OTP must be 6 digits.");return}g(!0);try{let e=await m.Z.post("/api/verify-otp",{otp:r});200===e.status?(alert("OTP Verified Successfully!"),f(!0)):h("Verification failed. Please try again.")}catch(e){h("An error occurred. Please try again.")}finally{g(!1)}t(!1)},j=async()=>{g(!0);try{let e=await m.Z.post("/api/resend-otp");200===e.status?alert("OTP Resent Successfully!"):h("Failed to resend OTP. Please try again.")}catch(e){h("An error occurred while resending OTP. Please try again.")}finally{g(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.Z,{sx:{position:"relative",overflow:"hidden",width:"100%",height:{lg:"350px",md:"350px",sm:"100%",xs:"100%"},backgroundImage:'url("/banner/banner.png")',backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"right center",zIndex:5,display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},children:[(0,n.jsx)(l.Z,{className:"Subscritption_box_stack_responsive",sx:{zIndex:8,position:"absolute",left:"8em",top:"7em"}}),(0,n.jsx)(s.Z,{className:"dashboard_subscription_box_stack_responsive",sx:{paddingTop:{lg:"6rem!important",md:"6rem!important",sm:"6rem!important",xs:"3rem!important"},paddingBottom:{lg:"4rem!important",md:"4rem!important",sm:"2rem!important",xs:"2rem!important"},position:"relative",zIndex:9}})]}),(0,n.jsxs)(o.ZP,{sx:{alignItems:"center",padding:"100px 0px"},container:!0,direction:"column",spacing:2,children:[(0,n.jsx)(o.ZP,{item:!0,children:(0,n.jsx)(d.Z,{variant:"h5",children:"Verify OTP"})}),(0,n.jsx)(o.ZP,{item:!0,children:(0,n.jsx)(c.Z,{label:"Enter OTP",variant:"outlined",fullWidth:!0,value:r,onChange:e=>{let t=e.target.value;(t=t.replace(/\D/g,"")).length>6&&(t=t.slice(0,6)),p(t),h("")},error:!!x,helperText:x,disabled:v})}),(0,n.jsx)(o.ZP,{item:!0,children:(0,n.jsx)(u.Z,{variant:"contained",color:"primary",onClick:y,disabled:v,children:"Verify OTP"})}),(0,n.jsx)(o.ZP,{item:!0,children:(0,n.jsx)(u.Z,{variant:"text",onClick:j,disabled:v,children:"Resend OTP"})})]})]})}}}]);