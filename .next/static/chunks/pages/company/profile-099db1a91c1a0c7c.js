(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9783],{98532:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/company/profile",function(){return t(88717)}])},88717:function(e,i,t){"use strict";t.r(i);var l=t(85893),a=t(83590),o=t(21425),n=t(6049),r=t(38308),d=t(26107),c=t(62561),s=t(63763),p=t(50594),u=t(87357),v=t(51233),m=t(15861),f=t(66242),x=t(44267),_=t(93946),h=t(28482),y=t(50841),g=t(46901),b=t(67294);let j=()=>{let{enqueueSnackbar:e}=(0,y.Ds)(),[i,t]=b.useState(!1),[a,d]=b.useState({}),{user:j}=(0,o.E)(),Z=(0,h.TA)({initialValues:{user_name:"",address:"",user_type:"company",email:"",mobile:"",profile_img_url:"",company_certificate:"",company_vat:"",company_certificate_url:"",company_vat_url:""},validate:e=>{},onSubmit:async i=>{var t,a,o,n,r,d,c,p,u,v;let m=new FormData;m.append("user_type",null==i?void 0:i.user_type),m.append("user_name",null==i?void 0:i.user_name),m.append("email",null==i?void 0:i.email),m.append("mobile",null==i?void 0:i.mobile),m.append("company_certificate",null==i?void 0:i.company_certificate),m.append("company_vat",null==i?void 0:i.company_vat);let f=new FormData;f.append("address",i.address),f.append("state",i.state),f.append("city",i.city),f.append("zip_code",i.zip_code),f.append("lat",i.lat),f.append("long",i.long);try{let[i,u]=await Promise.all([s.Z.post("/api/auth/profile/update-company-profile/".concat(null==j?void 0:j.id),m),s.Z.post("/api/auth/profile/update-address/".concat(null==j?void 0:j.id),f)]);console.log("addressFormData",f,"profileFormData",m),(null==i?void 0:i.status)===200?e((0,l.jsx)(g.Z,{style:{width:"100%",padding:"30px",backdropFilter:"blur(8px)",background:"#ff7533 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"success",children:null===(a=response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message}),{variant:"success",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}):e((0,l.jsx)(g.Z,{style:{width:"100%",padding:"30px",filter:blur("8px"),background:"#ffe9d5 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"error",children:null===(n=response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.error}),{variant:"error",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}),(null==u?void 0:u.status)===200?e((0,l.jsx)(g.Z,{style:{width:"100%",padding:"30px",backdropFilter:"blur(8px)",background:"#ff7533 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"success",children:null===(d=response)||void 0===d?void 0:null===(r=d.data)||void 0===r?void 0:r.message}),{variant:"success",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}):e((0,l.jsx)(g.Z,{style:{width:"100%",padding:"30px",filter:blur("8px"),background:"#ffe9d5 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"error",children:null===(p=response)||void 0===p?void 0:null===(c=p.data)||void 0===c?void 0:c.error}),{variant:"error",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}),F()}catch(a){let{response:t}=a;if((null==t?void 0:t.status)===422)for(let[e]of(console.log("response",t.data.error),Object.entries(i)))t.data.error[e]&&setErrors({[e]:t.data.error[e][0]});(null==t?void 0:null===(u=t.data)||void 0===u?void 0:u.status)===406&&e((0,l.jsx)(g.Z,{style:{width:"100%",padding:"30px",filter:blur("8px"),background:"#ffe9d5 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"error",children:null==t?void 0:null===(v=t.data)||void 0===v?void 0:v.error}),{variant:"error",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}})}}});async function F(){t(!0),await s.Z.get("api/auth/profile/my-profile").then(e=>{if(200===e.status){var i,l,a,o,n,r,c,s,p,u,v,m,f,x,_;t(!1),d(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.view_data);let h=null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.view_data;console.log("newDatanewData",h),Z.setFieldValue("user_name",null==h?void 0:null===(a=h.profile)||void 0===a?void 0:a.user_name),Z.setFieldValue("email",null==h?void 0:h.email),Z.setFieldValue("mobile",null==h?void 0:h.mobile),Z.setFieldValue("profile_img","".concat(null==h?void 0:null===(o=h.profile)||void 0===o?void 0:o.base_url).concat(null==h?void 0:null===(n=h.profile)||void 0===n?void 0:n.profile_img)),Z.setFieldValue("profile_img_url","".concat(null==h?void 0:null===(r=h.profile)||void 0===r?void 0:r.base_url).concat(null==h?void 0:null===(c=h.profile)||void 0===c?void 0:c.profile_img)),Z.setFieldValue("address",null==h?void 0:null===(s=h.profile)||void 0===s?void 0:s.address),Z.setFieldValue("plan",null==h?void 0:null===(p=h.plan)||void 0===p?void 0:p.plan_name),Z.setFieldValue("company_certificate",null==h?void 0:null===(u=h.profile)||void 0===u?void 0:u.company_certificate),Z.setFieldValue("company_vat",null==h?void 0:null===(v=h.profile)||void 0===v?void 0:v.company_vat),Z.setFieldValue("company_certificate_url","".concat(null==h?void 0:null===(m=h.profile)||void 0===m?void 0:m.base_url).concat(null==h?void 0:null===(f=h.profile)||void 0===f?void 0:f.company_certificate)),Z.setFieldValue("company_vat_url","".concat(null==h?void 0:null===(x=h.profile)||void 0===x?void 0:x.base_url).concat(null==h?void 0:null===(_=h.profile)||void 0===_?void 0:_.company_vat))}}).catch(e=>{t(!1),console.log("ProfileError",e)})}return b.useEffect(()=>{F()},[]),console.log("datadata",i),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z,{formik:Z,data:a,loader:i,Content:()=>{var e,i,t;return(0,l.jsxs)(u.Z,{sx:{mt:2},children:[(0,l.jsxs)(v.Z,{textAlign:"center",children:[(0,l.jsx)(m.Z,{textAlign:"left",variant:"p",children:"Company Certificate"}),!Z.values.company_certificate&&(0,l.jsx)(r.zC,{fullWidth:!0,isAdditional:!0,textBoxSx:{"& .MuiInput-root:after":{borderBottom:"0px !important"},"& .MuiInput-root:before":{borderBottom:"0px !important",content:'""'}},type:"file",size:"small",value:"",name:"company_certificate",onChange:e=>{Z.setFieldValue("company_certificate",e.target.files[0]),Z.setFieldValue("company_certificate_url",URL.createObjectURL(e.target.files[0]))},helperText:Z.touched.company_certificate&&Z.errors.company_certificate}),Z.values.company_certificate_url&&(0,l.jsx)(f.Z,{sx:{width:"max-content"},children:(0,l.jsxs)(x.Z,{sx:{pb:"10px !important",pt:"30px !important",px:"10px !important"},children:[(0,l.jsx)(u.Z,{sx:{position:"absolute",top:5,right:6},children:(0,l.jsx)(f.Z,{sx:{borderRadius:"50%"},children:(0,l.jsx)(_.Z,{size:"small",onClick:()=>{Z.setFieldValue("company_certificate",""),Z.setFieldValue("company_certificate_url","")},children:(0,l.jsx)(p.Z,{fontSize:"small"})})})}),(0,l.jsx)(u.Z,{component:"img",style:{margin:"10px"},src:Z.values.company_certificate_url,alt:null===(i=Z.values)||void 0===i?void 0:null===(e=i.company_certificate)||void 0===e?void 0:e.name,width:"150px",height:"150px",thumbnail:!0})]})})]}),(0,l.jsxs)(v.Z,{textAlign:"center",mt:2,children:[(0,l.jsx)(m.Z,{textAlign:"left",variant:"p",children:"Company VAT Certificate (Optional)"}),!Z.values.company_vat&&(0,l.jsx)(r.zC,{fullWidth:!0,isAdditional:!0,textBoxSx:{"& .MuiInput-root:after":{borderBottom:"0px !important"},"& .MuiInput-root:before":{borderBottom:"0px !important",content:'""'}},type:"file",size:"small",value:"",name:"company_vat",onChange:e=>{Z.setFieldValue("company_vat",e.target.files[0]),Z.setFieldValue("company_vat_url",URL.createObjectURL(e.target.files[0]))},helperText:Z.touched.company_vat&&Z.errors.company_vat}),Z.values.company_vat_url&&(0,l.jsx)(f.Z,{sx:{width:"max-content"},children:(0,l.jsxs)(x.Z,{sx:{pb:"10px !important",pt:"30px !important",px:"10px !important"},children:[(0,l.jsx)(u.Z,{sx:{position:"absolute",top:5,right:6},children:(0,l.jsx)(f.Z,{sx:{borderRadius:"50%"},children:(0,l.jsx)(_.Z,{size:"small",onClick:()=>{Z.setFieldValue("company_vat",""),Z.setFieldValue("company_vat_url","")},children:(0,l.jsx)(p.Z,{fontSize:"small"})})})}),(0,l.jsx)(u.Z,{component:"img",style:{margin:"10px"},src:Z.values.company_vat_url,alt:null===(t=Z.values.company_vat)||void 0===t?void 0:t.name,width:"150px",height:"150px",thumbnail:!0})]})})]})]})}}),(0,l.jsx)(n.Z,{})]})};j.getLayout=function(e){return(0,l.jsxs)(d.l,{children:[" ",(0,l.jsx)(a.Z,{children:e})]})},i.default=j}},function(e){e.O(0,[4885,1810,678,3827,1994,6034,4815,8251,4576,5981,6107,5324,5381,9774,2888,179],function(){return e(e.s=98532)}),_N_E=e.O()}]);