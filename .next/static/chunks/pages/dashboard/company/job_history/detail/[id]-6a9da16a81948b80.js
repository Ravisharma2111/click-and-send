(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6457],{54088:function(i,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/company/job_history/detail/[id]",function(){return n(92863)}])},83590:function(i,e,n){"use strict";n.d(e,{Z:function(){return x}});var l=n(85893),r=n(45697),t=n.n(r),o=n(67294),d=n(11163),s=n(21425),a=n(94717);n(26107);var c=n(50261),u=n(87357),h=n(46574);function x(i){let{children:e}=i,{isAuthenticated:n,isInitialized:r}=(0,s.E)(),{pathname:t,push:x}=(0,d.useRouter)(),[v,p]=(0,o.useState)(null);return((0,o.useEffect)(()=>{v&&t!==v&&x(v),n&&p(null)},[n,t,x,v]),r)?n?(0,l.jsxs)(l.Fragment,{children:[" ",e," "]}):(t!==v&&p(t),(0,l.jsx)(a.Z,{})):(0,l.jsx)(u.Z,{mt:10,children:(0,l.jsx)(h.Z,{children:(0,l.jsx)(c.Z,{})})})}x.propTypes={children:t().node}},6049:function(i,e,n){"use strict";var l=n(85893),r=n(21425),t=n(64666),o=n(6514),d=n(51233),s=n(15861),a=n(67720),c=n(31425),u=n(69417),h=n(11163),x=n(67294);e.Z=i=>{var e,n;let{children:v}=i,{user:p}=(0,r.E)(),j=(0,h.useRouter)(),[Z,m]=x.useState(!0),b=["/dashboard/driver/subscription","/dashboard/company/subscription","/dashboard/customer/subscription"];return x.useEffect(()=>{b.includes(null==j?void 0:j.route)?m(!1):m(!0)},[null==j?void 0:j.route]),(0,l.jsx)("div",{children:(null==p?void 0:null===(e=p.plan)||void 0===e?void 0:e.plan_id)?(0,l.jsxs)(t.Z,{open:(null==p||null===(n=p.plan)||void 0===n||!n.plan_id)&&Z,components:"form",scroll:"paper","aria-describedby":"alert-dialog-slide-description",sx:{"&.MuiDialog-root":{zIndex:100},"& .MuiPaper-rounded":{borderRadius:"0px"},"& .MuiBackdrop-root":{backgroundColor:"#f2f2f2"}},maxWidth:"xs",children:[(0,l.jsx)(o.Z,{dividers:"paper",children:(0,l.jsx)(d.Z,{textAlign:"left",mt:2,children:(0,l.jsx)(s.Z,{variant:"h5",fontWeight:500,sx:{cursor:"pointer",fontSize:"16px",fontWeight:500},children:"Please Subscribe to Access this Page"})})}),(0,l.jsx)(a.Z,{}),(0,l.jsx)(c.Z,{sx:{justifyContent:"center"},children:(0,l.jsx)(u.Z,{variant:"contained",color:"primary",type:"submit",onClick:()=>"/dashboard/company"===j.route?j.push("company/subscription"):"/dashboard/driver/active_jobs"===j.route?j.push("subscription"):"/dashboard/customer"===j.route?j.push("/dashboard/customer/subscription"):"/driver/profile"===j.route?j.push("/dashboard/driver/subscription"):"/customer/profile"===j.route?j.push("/dashboard/customer/subscription"):"/company/profile"===j.route?j.push("/dashboard/company/subscription"):"",children:"Subscribe Now"})})]}):(0,l.jsx)(l.Fragment,{})})}},92863:function(i,e,n){"use strict";n.r(e),n.d(e,{default:function(){return N}});var l=n(85893),r=n(26107),t=n(83590),o=n(21425),d=n(38308),s=n(79582),a=n(63763),c=n(87357),u=n(46574),h=n(69417),x=n(66242),v=n(15861),p=n(67720),j=n(44267),Z=n(51233),m=n(72882),b=n(7906),g=n(53184),f=n(53816),y=n(53252),w=n(295),_=n(91440),C=n(11994),k=n(64666),S=n(6514),R=n(28482),W=n(11163),z=n(50841),A=n(46901),D=n(67294),E=()=>{var i,e,n,r;let t=(0,W.useRouter)(),{user:E}=(0,o.E)(),{enqueueSnackbar:T}=(0,z.Ds)(),{id:V}=t.query,[N,q]=(0,D.useState)([]),[F,P]=(0,D.useState)([]),[O,I]=(0,D.useState)([]),[M,H]=D.useState(!1),[B,L]=D.useState(!1),[Q,X]=(0,D.useState)(!1),J=(0,R.TA)({initialValues:{job_id:"",user_id:"",given_by:"customer",rating:"",review:""},validate:i=>{let e={};return i.review||(e.review="Note is required"),i.rating||(e.rating="Rating is required"),e},onSubmit:async i=>{await a.Z.post("api/auth/rating/add",J.values).then(i=>{if(200===i.status){var e;J.handleReset(),H(!1),T((0,l.jsx)(A.Z,{style:{width:"100%",padding:"30px",backdropFilter:"blur(8px)",background:"#ff7533 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"success",children:null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.message}),{variant:"success",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}),G(),handleClose(!0)}}).catch(i=>{console.log(i)})}}),G=async()=>{await a.Z.get("api/auth/jobs/view/".concat(V)).then(i=>{var e,n,l;(null==i?void 0:i.status)===200&&(q(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.view_data),P(null==i?void 0:null===(l=i.data)||void 0===l?void 0:null===(n=l.view_data)||void 0===n?void 0:n.ratings))}).catch(i=>{console.log("error",i)})};D.useEffect(()=>{V&&G()},[V]),(0,D.useEffect)(()=>{J.setFieldValue("user_id",null==E?void 0:E.id),J.setFieldValue("job_id",V)},[E,null==E?void 0:E.id,V]);let K=async i=>{let e=i.find(i=>"customer"===i.given_by);await a.Z.get("api/auth/rating/view/".concat(e.id)).then(i=>{if((null==i?void 0:i.status)===200){I(i.data.view_data);let{rating:e,review:n}=i.data.view_data;$.setValues({rating:e,review:n}),L(!0)}}).catch(i=>{console.log("error",i)})},U=async(i,e)=>{await a.Z.post("api/auth/rating/update/".concat(i),e).then(i=>{if(200===i.status){var e;$.handleReset(),L(!1),T((0,l.jsx)(A.Z,{style:{width:"100%",padding:"30px",backdropFilter:"blur(8px)",background:"#ff7533 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"success",children:null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.message}),{variant:"success",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}),G(),handleClose(!0)}}).catch(i=>{console.log(i)})},Y=async i=>{O&&O.id?U(O.id,i):console.log("Rating ID not available")},$=(0,R.TA)({initialValues:{job_id:"",user_id:"",given_by:"customer",rating:"",review:""},validate:i=>{let e={};return i.review||(e.review="Note is required"),i.rating||(e.rating="Rating is required"),e},onSubmit:Y});return(0,l.jsxs)(D.Fragment,{children:[(0,l.jsx)(c.Z,{mt:10,pb:12,children:(0,l.jsx)(u.Z,{children:(0,l.jsxs)(c.Z,{my:4,children:[(0,l.jsxs)(h.Z,{variant:"outlined",sx:{my:2},onClick:()=>t.push("/dashboard/company/job_history"),children:[(0,l.jsx)(s.Z,{icon:"ion:play-back",sx:{mr:"7px"},width:14}),"Back"]}),(0,l.jsxs)(x.Z,{sx:{position:"relative"},children:[(0,l.jsx)(v.Z,{textAlign:"center",variant:"h6",my:1,fontSize:17,children:"Job Detail"}),(0,l.jsx)(p.Z,{}),(0,l.jsxs)(j.Z,{children:[(0,l.jsx)(v.Z,{variant:"h4",component:"h4",textAlign:"center",children:null==N?void 0:null===(i=N.job)||void 0===i?void 0:i.name}),(0,l.jsxs)(Z.Z,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,my:1,children:[(0,l.jsx)(v.Z,{component:"p",variant:"body2",fontWeight:500,children:"Vehicle Requirment:"}),(0,l.jsx)(v.Z,{component:"p",variant:"body2",fontWeight:600,children:null==N?void 0:null===(e=N.job)||void 0===e?void 0:e.vehicle})]}),(0,l.jsx)(p.Z,{sx:{my:4}}),(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(v.Z,{component:"p",variant:"body1",fontWeight:500,textAlign:"center",mb:2,children:"Pickup Details"}),(0,l.jsx)(m.Z,{sx:{borderRadius:"10px",border:"1px solid",borderColor:i=>i.palette.primary.main},children:(0,l.jsxs)(b.Z,{"aria-label":"simple table",sx:{minWidth:"100%"},children:[(0,l.jsx)(g.Z,{children:(0,l.jsxs)(f.Z,{children:[(0,l.jsx)(y.Z,{align:"left",children:"Address"}),(0,l.jsx)(y.Z,{align:"left",children:"Pickup Date"}),(0,l.jsx)(y.Z,{align:"left",children:"Pickup Time"}),(0,l.jsx)(y.Z,{align:"left",children:"L*W*H"}),(0,l.jsx)(y.Z,{align:"left",children:"Quantity"}),(0,l.jsx)(y.Z,{align:"left",children:"Image"}),(0,l.jsx)(y.Z,{align:"left",children:"Material"})]})}),(0,l.jsx)(w.Z,{children:(null==N?void 0:N.pickup)&&(null==N?void 0:null===(n=N.pickup)||void 0===n?void 0:n.length)>0&&(null==N?void 0:N.pickup.map((i,e)=>{var n,r,t,o,d,s,a,u,h;return(0,l.jsxs)(f.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,l.jsx)(y.Z,{component:"th",scope:"row",children:(0,l.jsx)(v.Z,{component:"p",variant:"body2",children:null==i?void 0:i.address})}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(v.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(n=i.item)||void 0===n?void 0:n.pickup_date})}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(v.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(r=i.item)||void 0===r?void 0:r.pickup_time})}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(v.Z,{component:"p",variant:"body2",children:"".concat(null==i?void 0:null===(t=i.item)||void 0===t?void 0:t.length," * ").concat(null==i?void 0:null===(o=i.item)||void 0===o?void 0:o.width," * ").concat(null==i?void 0:null===(d=i.item)||void 0===d?void 0:d.height)})}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(v.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(s=i.item)||void 0===s?void 0:s.quantity})}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(c.Z,{children:(0,l.jsx)(c.Z,{component:"img",m:"auto",src:"".concat(null==i?void 0:null===(a=i.item)||void 0===a?void 0:a.base_url).concat(null==i?void 0:null===(u=i.item)||void 0===u?void 0:u.image),width:80})})}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(v.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(h=i.item)||void 0===h?void 0:h.material})})]},"jobDetail".concat(e))}))})]})})]}),(0,l.jsx)(p.Z,{sx:{my:4}}),(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(v.Z,{component:"p",variant:"body1",fontWeight:500,textAlign:"center",mb:2,children:"Delivery Details"}),(0,l.jsx)(m.Z,{sx:{borderRadius:"10px",border:"1px solid",borderColor:i=>i.palette.primary.main},children:(0,l.jsxs)(b.Z,{"aria-label":"simple table",sx:{minWidth:"100%"},children:[(0,l.jsx)(g.Z,{children:(0,l.jsxs)(f.Z,{children:[(0,l.jsx)(y.Z,{align:"left",children:"Address"}),(0,l.jsx)(y.Z,{align:"left",children:"Delivery Date"}),(0,l.jsx)(y.Z,{align:"left",children:"Delivery Time"}),(0,l.jsx)(y.Z,{align:"left",children:"Quantity"})]})}),(0,l.jsx)(w.Z,{children:(null==N?void 0:N.drop)&&(null==N?void 0:null===(r=N.drop)||void 0===r?void 0:r.length)>0&&(null==N?void 0:N.drop.map((i,e)=>{var n,r,t;return(0,l.jsxs)(f.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,l.jsx)(y.Z,{component:"th",scope:"row",children:(0,l.jsx)(v.Z,{component:"p",variant:"body2",children:null==i?void 0:i.address})}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(v.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(n=i.item)||void 0===n?void 0:n.drop_date})}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(v.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(r=i.item)||void 0===r?void 0:r.drop_time})}),(0,l.jsx)(y.Z,{children:(0,l.jsx)(v.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(t=i.item)||void 0===t?void 0:t.quantity})})]},"jobDetail".concat(e))}))})]})})]}),(0,l.jsxs)(c.Z,{my:4,children:[(0,l.jsx)(p.Z,{}),(0,l.jsxs)(c.Z,{my:3,children:[(0,l.jsx)(c.Z,{textAlign:"right",children:F&&F.some(i=>i.id==i.id)&&F.some(i=>"customer"===i.given_by)?(0,l.jsx)(h.Z,{variant:"outlined",onClick:()=>K(F),children:"Edit Rating"}):(0,l.jsx)(h.Z,{variant:"outlined",onClick:()=>H(!0),children:"+ Add Rating"})}),(0,l.jsx)(c.Z,{children:(0,l.jsx)(v.Z,{textAlign:"center",variant:"h4",children:"Rating & Reviews"})})]}),F&&(null==F?void 0:F.length)>0&&F.map((i,e)=>{var n,r,t;return(0,l.jsxs)(c.Z,{children:[(0,l.jsxs)(Z.Z,{spacing:3,direction:"row",py:2,children:[(0,l.jsx)(c.Z,{component:"img",src:"".concat(null==i?void 0:null===(n=i.user)||void 0===n?void 0:n.base_url).concat(null==i?void 0:null===(r=i.user)||void 0===r?void 0:r.profile_img),width:60,height:60,sx:{objectFit:"cover"}}),(0,l.jsxs)(Z.Z,{direction:"column",children:[(0,l.jsx)(c.Z,{children:(0,l.jsx)(v.Z,{fontSize:16,fontWeight:500,color:"primary",children:null==i?void 0:null===(t=i.user)||void 0===t?void 0:t.user_name})}),(0,l.jsx)(c.Z,{children:(0,l.jsx)(_.Z,{value:null==i?void 0:i.rating,readOnly:!0,size:"small"})}),(0,l.jsx)(c.Z,{children:(0,l.jsx)(v.Z,{fontSize:14,children:null==i?void 0:i.review})})]})]}),(0,l.jsx)(p.Z,{})]},e)})]})]})]})]})})}),(0,l.jsx)(C.Z,{open:Q,onClose:()=>X(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsx)(c.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",boxShadow:24,borderRadius:"10px",p:4},children:(0,l.jsx)(m.Z,{sx:{borderRadius:"10px",border:"1px solid",borderColor:i=>i.palette.grey[300]},children:(0,l.jsxs)(b.Z,{"aria-label":"simple table",children:[(0,l.jsx)(g.Z,{children:(0,l.jsxs)(f.Z,{children:[(0,l.jsx)(y.Z,{align:"left",children:"Sr. No."}),(0,l.jsx)(y.Z,{align:"left",children:"Address"})]})}),(0,l.jsx)(w.Z,{children:Q&&(null==Q?void 0:Q.length)>0&&Q.map((i,e)=>(0,l.jsxs)(f.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,l.jsx)(y.Z,{component:"th",scope:"row",children:(0,l.jsx)(v.Z,{children:e+1})}),(0,l.jsx)(y.Z,{align:"left",children:(0,l.jsx)(v.Z,{sx:{maxWidth:"52em",wordWrap:"break-word"},children:null==i?void 0:i.address})})]},"jobDetail".concat(e)))})]})})})}),(0,l.jsx)(k.Z,{open:M,onClose:i=>H(i),maxWidth:"xs",fullWidth:!0,children:(0,l.jsx)(S.Z,{sx:{my:3},children:(0,l.jsxs)(c.Z,{component:"form",noValidate:!0,onSubmit:J.handleSubmit,children:[(0,l.jsx)(c.Z,{align:"right",children:(0,l.jsx)(s.Z,{icon:"basil:cross-solid",width:20,onClick:()=>H(!1),sx:{border:"1px solid grey",borderRadius:"50%",cursor:"pointer"}})}),(0,l.jsx)(v.Z,{mb:2,variant:"subtitle1",children:"Review"}),(0,l.jsxs)(Z.Z,{spacing:1,children:[(0,l.jsx)(c.Z,{children:(0,l.jsx)(_.Z,{value:J.values.rating,onChange:J.handleChange,name:"rating",helperText:J.touched.rating&&J.errors.rating})}),(0,l.jsx)(c.Z,{children:(0,l.jsx)(d.zC,{size:"small",name:"review",label:"Review",fullWidth:!0,multiline:!0,rows:"4",value:J.values.review,onChange:J.handleChange,helperText:J.touched.review&&J.errors.review})})]}),(0,l.jsx)(Z.Z,{direction:"row",spacing:8,children:(0,l.jsx)(h.Z,{fullWidth:!0,variant:"outlined",type:"submit",children:"Submit"})})]})})}),(0,l.jsx)(k.Z,{open:B,onClose:i=>L(i),maxWidth:"xs",fullWidth:!0,children:(0,l.jsx)(S.Z,{sx:{my:3},children:(0,l.jsxs)(c.Z,{component:"form",noValidate:!0,onSubmit:$.handleSubmit,children:[(0,l.jsx)(c.Z,{align:"right",children:(0,l.jsx)(s.Z,{icon:"basil:cross-solid",width:20,onClick:()=>L(!1),sx:{border:"1px solid grey",borderRadius:"50%",cursor:"pointer"}})}),(0,l.jsx)(v.Z,{mb:2,variant:"subtitle1",children:"Review"}),(0,l.jsxs)(Z.Z,{spacing:1,children:[(0,l.jsx)(c.Z,{children:(0,l.jsx)(_.Z,{value:$.values.rating,onChange:$.handleChange,name:"rating",helperText:$.touched.rating&&$.errors.rating})}),(0,l.jsx)(c.Z,{children:(0,l.jsx)(d.zC,{size:"small",name:"review",label:"Review",fullWidth:!0,multiline:!0,rows:"4",value:$.values.review,onChange:$.handleChange,helperText:$.touched.review&&$.errors.review})})]}),(0,l.jsx)(Z.Z,{direction:"row",spacing:8,children:(0,l.jsx)(h.Z,{fullWidth:!0,variant:"outlined",type:"submit",children:"Submit"})})]})})})]})},T=n(6049);let V=()=>(0,l.jsxs)(t.Z,{children:[(0,l.jsx)(E,{}),(0,l.jsx)(T.Z,{})]});V.getLayout=function(i){return(0,l.jsx)(r.l,{children:i})};var N=V}},function(i){i.O(0,[4885,1810,678,3827,1994,6034,4815,8251,4576,1440,659,5981,6107,5324,9774,2888,179],function(){return i(i.s=54088)}),_N_E=i.O()}]);