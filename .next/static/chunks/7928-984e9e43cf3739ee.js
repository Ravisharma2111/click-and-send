"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7928],{83590:function(i,e,l){l.d(e,{Z:function(){return u}});var n=l(85893),d=l(45697),r=l.n(d),t=l(67294),o=l(11163),s=l(21425),a=l(94717);l(26107);var c=l(50261),h=l(87357),x=l(46574);function u(i){let{children:e}=i,{isAuthenticated:l,isInitialized:d}=(0,s.E)(),{pathname:r,push:u}=(0,o.useRouter)(),[v,j]=(0,t.useState)(null);return((0,t.useEffect)(()=>{v&&r!==v&&u(v),l&&j(null)},[l,r,u,v]),d)?l?(0,n.jsxs)(n.Fragment,{children:[" ",e," "]}):(r!==v&&j(r),(0,n.jsx)(a.Z,{})):(0,n.jsx)(h.Z,{mt:10,children:(0,n.jsx)(x.Z,{children:(0,n.jsx)(c.Z,{})})})}u.propTypes={children:r().node}},46586:function(i,e,l){var n=l(85893),d=l(21425),r=l(38308),t=l(79582),o=l(63763),s=l(87357),a=l(46574),c=l(69417),h=l(66242),x=l(15861),u=l(67720),v=l(44267),j=l(51233),Z=l(72882),p=l(7906),m=l(53184),g=l(53816),b=l(53252),y=l(295),f=l(91440),w=l(11994),k=l(64666),_=l(6514),C=l(28482),R=l(11163),S=l(50841),W=l(46901),D=l(67294);e.Z=()=>{var i,e,l,A;let z=(0,R.useRouter)(),{user:E}=(0,d.E)(),{enqueueSnackbar:q}=(0,S.Ds)(),{id:F}=z.query,[T,V]=(0,D.useState)([]),[N,P]=(0,D.useState)([]),[H,I]=D.useState(!1),[L,O]=(0,D.useState)(!1),Q=(0,C.TA)({initialValues:{job_id:"",user_id:"",given_by:"customer",rating:"",review:""},validate:i=>{let e={};return i.review||(e.review="Note is required"),i.rating||(e.rating="Rating is required"),e},onSubmit:async i=>{await o.Z.post("api/auth/rating/add",Q.values).then(i=>{if(200===i.status){var e;Q.handleReset(),I(!1),q((0,n.jsx)(W.Z,{style:{width:"100%",padding:"30px",backdropFilter:"blur(8px)",background:"#ff7533 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"success",children:null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.message}),{variant:"success",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}),B(),handleClose(!0)}}).catch(i=>{console.log(i)})}}),B=async()=>{await o.Z.get("api/auth/jobs/view/".concat(F)).then(i=>{var e,l,n,d;(null==i?void 0:i.status)===200&&(V(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.view_data),P(null==i?void 0:null===(d=i.data)||void 0===d?void 0:null===(n=d.view_data)||void 0===n?void 0:null===(l=n.job)||void 0===l?void 0:l.ratings))}).catch(i=>{console.log("RatignList",i)})};return D.useEffect(()=>{F&&B()},[F]),(0,D.useEffect)(()=>{Q.setFieldValue("user_id",null==E?void 0:E.id),Q.setFieldValue("job_id",F)},[E,null==E?void 0:E.id,F]),console.log("jobDetail345",T,N),(0,n.jsxs)(D.Fragment,{children:[(0,n.jsx)(s.Z,{mt:10,pb:12,children:(0,n.jsx)(a.Z,{children:(0,n.jsxs)(s.Z,{my:4,children:[(0,n.jsxs)(c.Z,{variant:"outlined",sx:{my:2},onClick:()=>z.push("/dashboard/customer/job_delete"),children:[(0,n.jsx)(t.Z,{icon:"ion:play-back",sx:{mr:"7px"},width:14}),"Back"]}),(0,n.jsxs)(h.Z,{sx:{position:"relative"},children:[(0,n.jsx)(x.Z,{textAlign:"center",variant:"h6",my:1,fontSize:17,children:"Job Detail"}),(0,n.jsx)(u.Z,{}),(0,n.jsxs)(v.Z,{children:[(0,n.jsx)(x.Z,{variant:"h4",component:"h4",textAlign:"center",children:null==T?void 0:null===(i=T.job)||void 0===i?void 0:i.name}),(0,n.jsxs)(j.Z,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,my:1,children:[(0,n.jsx)(x.Z,{component:"p",variant:"body2",fontWeight:500,children:"Vehicle Requirment:"}),(0,n.jsx)(x.Z,{component:"p",variant:"body2",fontWeight:600,children:null==T?void 0:null===(e=T.job)||void 0===e?void 0:e.vehicle})]}),(0,n.jsx)(u.Z,{sx:{my:4}}),(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(x.Z,{component:"p",variant:"body1",fontWeight:500,textAlign:"center",mb:2,children:"Pickup Details"}),(0,n.jsx)(Z.Z,{sx:{borderRadius:"10px",border:"1px solid",borderColor:i=>i.palette.primary.main},children:(0,n.jsxs)(p.Z,{"aria-label":"simple table",sx:{minWidth:"100%"},children:[(0,n.jsx)(m.Z,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(b.Z,{align:"left",children:"Address"}),(0,n.jsx)(b.Z,{align:"left",children:"Pickup Date"}),(0,n.jsx)(b.Z,{align:"left",children:"Pickup Time"}),(0,n.jsx)(b.Z,{align:"left",children:"L*W*H"}),(0,n.jsx)(b.Z,{align:"left",children:"Quantity"}),(0,n.jsx)(b.Z,{align:"left",children:"Image"}),(0,n.jsx)(b.Z,{align:"left",children:"Material"})]})}),(0,n.jsx)(y.Z,{children:(null==T?void 0:T.pickup)&&(null==T?void 0:null===(l=T.pickup)||void 0===l?void 0:l.length)>0&&(null==T?void 0:T.pickup.map((i,e)=>{var l,d,r,t,o,a,c,h,u;return(0,n.jsxs)(g.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,n.jsx)(b.Z,{component:"th",scope:"row",children:(0,n.jsx)(x.Z,{component:"p",variant:"body2",children:null==i?void 0:i.address})}),(0,n.jsx)(b.Z,{children:(0,n.jsx)(x.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(l=i.item)||void 0===l?void 0:l.pickup_date})}),(0,n.jsx)(b.Z,{children:(0,n.jsx)(x.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(d=i.item)||void 0===d?void 0:d.pickup_time})}),(0,n.jsx)(b.Z,{children:(0,n.jsx)(x.Z,{component:"p",variant:"body2",children:"".concat(null==i?void 0:null===(r=i.item)||void 0===r?void 0:r.length," * ").concat(null==i?void 0:null===(t=i.item)||void 0===t?void 0:t.width," * ").concat(null==i?void 0:null===(o=i.item)||void 0===o?void 0:o.height)})}),(0,n.jsx)(b.Z,{children:(0,n.jsx)(x.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(a=i.item)||void 0===a?void 0:a.quantity})}),(0,n.jsx)(b.Z,{children:(0,n.jsx)(s.Z,{children:(0,n.jsx)(s.Z,{component:"img",m:"auto",src:"".concat(null==i?void 0:null===(c=i.item)||void 0===c?void 0:c.base_url).concat(null==i?void 0:null===(h=i.item)||void 0===h?void 0:h.image),width:80})})}),(0,n.jsx)(b.Z,{children:(0,n.jsx)(x.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(u=i.item)||void 0===u?void 0:u.material})})]},"jobDetail".concat(e))}))})]})})]}),(0,n.jsx)(u.Z,{sx:{my:4}}),(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(x.Z,{component:"p",variant:"body1",fontWeight:500,textAlign:"center",mb:2,children:"Delivery Details"}),(0,n.jsx)(Z.Z,{sx:{borderRadius:"10px",border:"1px solid",borderColor:i=>i.palette.primary.main},children:(0,n.jsxs)(p.Z,{"aria-label":"simple table",sx:{minWidth:"100%"},children:[(0,n.jsx)(m.Z,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(b.Z,{align:"left",children:"Address"}),(0,n.jsx)(b.Z,{align:"left",children:"Delivery Date"}),(0,n.jsx)(b.Z,{align:"left",children:"Delivery Time"}),(0,n.jsx)(b.Z,{align:"left",children:"Quantity"})]})}),(0,n.jsx)(y.Z,{children:(null==T?void 0:T.drop)&&(null==T?void 0:null===(A=T.drop)||void 0===A?void 0:A.length)>0&&(null==T?void 0:T.drop.map((i,e)=>{var l,d,r;return(0,n.jsxs)(g.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,n.jsx)(b.Z,{component:"th",scope:"row",children:(0,n.jsx)(x.Z,{component:"p",variant:"body2",children:null==i?void 0:i.address})}),(0,n.jsx)(b.Z,{children:(0,n.jsx)(x.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(l=i.item)||void 0===l?void 0:l.drop_date})}),(0,n.jsx)(b.Z,{children:(0,n.jsx)(x.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(d=i.item)||void 0===d?void 0:d.drop_time})}),(0,n.jsx)(b.Z,{children:(0,n.jsx)(x.Z,{component:"p",variant:"body2",children:null==i?void 0:null===(r=i.item)||void 0===r?void 0:r.quantity})})]},"jobDetail".concat(e))}))})]})})]}),(0,n.jsxs)(s.Z,{my:4,children:[(0,n.jsx)(u.Z,{}),(0,n.jsxs)(s.Z,{my:3,children:[(0,n.jsx)(s.Z,{textAlign:"right",children:(0,n.jsx)(c.Z,{variant:"outlined",onClick:()=>I(!0),children:"+ Add Rating"})}),(0,n.jsx)(s.Z,{children:(0,n.jsx)(x.Z,{textAlign:"center",variant:"h4",children:"Rating & Reviews"})})]}),N&&(null==N?void 0:N.length)>0&&N.map((i,e)=>{var l,d,r;return(0,n.jsxs)(s.Z,{children:[(0,n.jsxs)(j.Z,{spacing:3,direction:"row",py:2,children:[(0,n.jsx)(s.Z,{component:"img",src:"".concat(null==i?void 0:null===(l=i.user)||void 0===l?void 0:l.base_url).concat(null==i?void 0:null===(d=i.user)||void 0===d?void 0:d.profile_img),width:60,height:60,sx:{objectFit:"cover"}}),(0,n.jsxs)(j.Z,{direction:"column",children:[(0,n.jsx)(s.Z,{children:(0,n.jsx)(x.Z,{fontSize:16,fontWeight:500,color:"primary",children:null==i?void 0:null===(r=i.user)||void 0===r?void 0:r.user_name})}),(0,n.jsx)(s.Z,{children:(0,n.jsx)(f.Z,{value:null==i?void 0:i.rating,readOnly:!0,size:"small"})}),(0,n.jsx)(s.Z,{children:(0,n.jsx)(x.Z,{fontSize:14,children:null==i?void 0:i.review})})]})]}),(0,n.jsx)(u.Z,{})]},e)})]})]})]})]})})}),(0,n.jsx)(w.Z,{open:L,onClose:()=>O(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsx)(s.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",bgcolor:"background.paper",boxShadow:24,borderRadius:"10px",p:4},children:(0,n.jsx)(Z.Z,{sx:{borderRadius:"10px",border:"1px solid",borderColor:i=>i.palette.grey[300]},children:(0,n.jsxs)(p.Z,{"aria-label":"simple table",children:[(0,n.jsx)(m.Z,{children:(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(b.Z,{align:"left",children:"Sr. No."}),(0,n.jsx)(b.Z,{align:"left",children:"Address"})]})}),(0,n.jsx)(y.Z,{children:L&&(null==L?void 0:L.length)>0&&L.map((i,e)=>(0,n.jsxs)(g.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,n.jsx)(b.Z,{component:"th",scope:"row",children:(0,n.jsx)(x.Z,{children:e+1})}),(0,n.jsx)(b.Z,{align:"left",children:(0,n.jsx)(x.Z,{sx:{maxWidth:"52em",wordWrap:"break-word"},children:null==i?void 0:i.address})})]},"jobDetail".concat(e)))})]})})})}),(0,n.jsx)(k.Z,{open:H,onClose:i=>I(i),maxWidth:"xs",fullWidth:!0,children:(0,n.jsx)(_.Z,{sx:{my:3},children:(0,n.jsxs)(s.Z,{component:"form",noValidate:!0,onSubmit:Q.handleSubmit,children:[(0,n.jsx)(s.Z,{align:"right",children:(0,n.jsx)(t.Z,{icon:"basil:cross-solid",width:20,onClick:()=>I(!1),sx:{border:"1px solid grey",borderRadius:"50%",cursor:"pointer"}})}),(0,n.jsx)(x.Z,{mb:2,variant:"subtitle1",children:"Review"}),(0,n.jsxs)(j.Z,{spacing:1,children:[(0,n.jsx)(s.Z,{children:(0,n.jsx)(f.Z,{value:Q.values.rating,onChange:Q.handleChange,name:"rating",helperText:Q.touched.rating&&Q.errors.rating})}),(0,n.jsx)(s.Z,{children:(0,n.jsx)(r.zC,{size:"small",name:"review",label:"Review",fullWidth:!0,multiline:!0,rows:"4",value:Q.values.review,onChange:Q.handleChange,helperText:Q.touched.review&&Q.errors.review})})]}),(0,n.jsx)(j.Z,{direction:"row",spacing:8,children:(0,n.jsx)(c.Z,{fullWidth:!0,variant:"outlined",type:"submit",children:"Submit"})})]})})})]})}}}]);