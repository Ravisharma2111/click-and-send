(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7232],{46272:function(e,i,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/customer/profile",function(){return l(30476)}])},30476:function(e,i,l){"use strict";l.r(i);var o=l(85893),a=l(83590),n=l(21425),t=l(6049),r=l(26107),d=l(62561),s=l(63763),u=l(28482),p=l(50841),c=l(46901),v=l(67294);let f=()=>{let{enqueueSnackbar:e}=(0,p.Ds)(),[i,l]=v.useState(!1),[a,r]=v.useState({}),{user:f}=(0,n.E)(),g=(0,u.TA)({initialValues:{user_name:"",address:"",user_type:"customer",email:"",mobile:"",plan_name:"",profile_img:"",profile_img_url:"",state:"",city:"",zip_code:"",lat:"",long:""},validate:e=>{},onSubmit:async i=>{var l,a,n,t,r,d,u,p,v,g;let m=new FormData;m.append("user_name",i.user_name),m.append("user_type",i.user_type),m.append("email",i.email),m.append("mobile",i.mobile),m.append("profile_img",i.profile_img),m.append("plan_name",i.plan_name);let h=new FormData;h.append("address",i.address),h.append("state",i.state),h.append("city",i.city),h.append("zip_code",i.zip_code),h.append("lat",i.lat),h.append("long",i.long);try{let[i,v]=await Promise.all([s.Z.post("/api/auth/profile/update-customer-profile/".concat(null==f?void 0:f.id),m),s.Z.post("/api/auth/profile/update-address/".concat(null==f?void 0:f.id),h)]);console.log("addressFormData",h,"profileFormData",m),(null==i?void 0:i.status)===200?e((0,o.jsx)(c.Z,{style:{width:"100%",padding:"30px",backdropFilter:"blur(8px)",background:"#ff7533 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"success",children:null===(a=response)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.message}),{variant:"success",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}):e((0,o.jsx)(c.Z,{style:{width:"100%",padding:"30px",filter:blur("8px"),background:"#ffe9d5 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"error",children:null===(t=response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.error}),{variant:"error",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}),(null==v?void 0:v.status)===200?e((0,o.jsx)(c.Z,{style:{width:"100%",padding:"30px",backdropFilter:"blur(8px)",background:"#ff7533 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"success",children:null===(d=response)||void 0===d?void 0:null===(r=d.data)||void 0===r?void 0:r.message}),{variant:"success",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}):e((0,o.jsx)(c.Z,{style:{width:"100%",padding:"30px",filter:blur("8px"),background:"#ffe9d5 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"error",children:null===(p=response)||void 0===p?void 0:null===(u=p.data)||void 0===u?void 0:u.error}),{variant:"error",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}),_()}catch(a){let{response:l}=a;if((null==l?void 0:l.status)===422)for(let[e]of(console.log("response",l.data.error),Object.entries(i)))l.data.error[e]&&setErrors({[e]:l.data.error[e][0]});(null==l?void 0:null===(v=l.data)||void 0===v?void 0:v.status)===406&&e((0,o.jsx)(c.Z,{style:{width:"100%",padding:"30px",filter:blur("8px"),background:"#ffe9d5 ",fontSize:"19px",fontWeight:800,lineHeight:"30px"},icon:!1,severity:"error",children:null==l?void 0:null===(g=l.data)||void 0===g?void 0:g.error}),{variant:"error",iconVariant:!0,anchorOrigin:{vertical:"top",horizontal:"center"}})}}});async function _(){l(!0),await s.Z.get("api/auth/profile/my-profile").then(e=>{if(200===e.status){var i,o,a,n,t,d,s,u,p,c,v,f,_;l(!1),r(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.view_data);let m=null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.view_data;for(let[e]of(console.log("newDatanewData",m),Object.entries(g.values)))"user_name"==e?g.setFieldValue("user_name",null==m?void 0:null===(a=m.profile)||void 0===a?void 0:a.user_name):"address"==e?g.setFieldValue("address",null==m?void 0:null===(n=m.profile)||void 0===n?void 0:n.address):"state"==e?g.setFieldValue("state",null==m?void 0:null===(t=m.profile)||void 0===t?void 0:t.state):"city"==e?g.setFieldValue("city",null==m?void 0:null===(d=m.profile)||void 0===d?void 0:d.city):"zip_code"==e?g.setFieldValue("zip_code",null==m?void 0:null===(s=m.profile)||void 0===s?void 0:s.zip_code):"lat"==e?g.setFieldValue("lat",null==m?void 0:null===(u=m.profile)||void 0===u?void 0:u.lat):"long"==e?g.setFieldValue("long",null==m?void 0:null===(p=m.profile)||void 0===p?void 0:p.long):"email"==e?g.setFieldValue("email",null==m?void 0:m.email):"mobile"==e?g.setFieldValue("mobile",null==m?void 0:m.mobile):"profile_img"==e?(g.setFieldValue("profile_img","".concat(null==m?void 0:null===(c=m.profile)||void 0===c?void 0:c.base_url).concat(null==m?void 0:null===(v=m.profile)||void 0===v?void 0:v.profile_img)),g.setFieldValue("profile_img_url","".concat(null==m?void 0:null===(f=m.profile)||void 0===f?void 0:f.base_url).concat(null==m?void 0:null===(_=m.profile)||void 0===_?void 0:_.profile_img))):"plan_name"==e&&g.setFieldValue("plan_name",null==m?void 0:m.plan_name)}}).catch(e=>{l(!1),console.log("ProfileError",e)})}return v.useEffect(()=>{_()},[f,null==f?void 0:f.id]),console.log("dataaaaaa",a),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{formik:g,data:a,loader:i}),(0,o.jsx)(t.Z,{})]})};f.getLayout=function(e){return(0,o.jsx)(r.l,{children:(0,o.jsx)(a.Z,{children:e})})},i.default=f}},function(e){e.O(0,[4885,1810,678,3827,1994,6034,4815,8251,4576,5981,6107,5324,5381,9774,2888,179],function(){return e(e.s=46272)}),_N_E=e.O()}]);